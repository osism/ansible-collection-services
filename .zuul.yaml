---
- secret:
    name: SECRET_ANSIBLE_COLLECTION_SERVICES
    data:
      DTRACK_API_KEY: !encrypted/pkcs1-oaep
        - PzJ72PoqFLS5T0fTfphm6+txmUz4DZfV6iXdECYTPGWcxM+K2cGNxjvbv8dSt9uP5fKFI
          zCLRI6SJ+tVPbYq/ytI8MBUeI4U3rOToIea09O4kFNyjdESpLggSNj4wD2jaG4eLh+ym1
          2iJgoYfQOAJR1oWuyMiM+S7Q4YdK9g9AyI8cUHkoNeh4hwyrJcj/bDbzzRu2rbk1Ud3Gr
          RLW7Sdg+TqjwXGHFi9QNT1WOh00sEf/H3c4ECpmeYW2cwAh0HsgFdoxbP7RsZe3athXtz
          PB//rGzLNLRvEYj/DX+KBiN1DLwJU9zXhlRMpUDa77EVf79yJTLrbIlQwAQ6WSndTovPj
          GJuycmKSTRa7R68/EwN9tATgKfDq9cUPLI8unym9rpB1rFEkIK63F7cwflO3XesEkoBIP
          vZDMTgQ3+hgk4wSKXcHu+PRcuvEP5Kcum2NTV9TBsPv2LWGlJKQavsFGwWvetpBNap7p5
          xQwSa+gfbC42i3TSs6o1JHxPaYBUiTJ9Xz/SBqw/j4uajGBOUs3odl6EhM9x7h836qrNC
          5QrxA0PJTxGR+fKCxxrMG8YHvlH1rQgp2lw4L2jTtjxquH6F5AMrZmmrKUFr/BkzJtGZX
          34LdjVBRFdhXKerYrbJqa8DvzWyymTLV1cQipWCpqnV50EStIM2EQUk4VTv5+s=
      DOCKER_USERNAME: !encrypted/pkcs1-oaep
        - h+0Qy1Kc9EVHa1L0fFviaycQEqPQn9mGVXlxCgJOf5br/hlbbD5eUe+cJwtFFbv0l2Gvh
          Oldx1RNr5k+4sHQZlPOyGV97pK1uPmQ9m11wRFUtwooNKXAYY7XAF4JFmFMKBxPa17pmo
          baDy5TdE+0/I9KcqaoxNc+rj7jLq8E6FPkphe8zRPRIOJvCv2V151H92lnGtWN5B8aGZs
          wGCe33L4rTfoPgr58qKazfHHAFt7VIadApVPvVupmcmPWUxXPkaeX2R6qjP1pxVZmg2UK
          hOgyV1yNx6NZeiWuvCc9IeWjCirmV4EfkxNzbWNc3AA/0x9axlMLNWR9twZmMPCGoxcC9
          r5dfqTMz7CKJBJKKmzzgwaSedVk82C63IT0Qcuv2bImqvN0exB6YhxgqJzI00XQCS+kL4
          OoI5TF3nqYAxXSUV067Heis2cy1EIiVqDB7Op7QF0fAfM6PsdNuWloW9mE/LO4JXqKefH
          /hbGgzEDr54zt6CCEA0XvxOkfZsa1X5UNdcikgpxBDKIMH1rDggv2krwLpUlYeytp256Q
          Ui+OCR99CEOYay5he+Mh3XsG0KqNMWnm6kD5ZXIoyv4+G17AzjeoICbEF8f3VF181RDtp
          QoiVeODq18NQnrbXQYX0lT6DipQ/cI87Nq2fi5bV6sqKBPcyodfQXuYAgLSw2M=
      DOCKER_PASSWORD: !encrypted/pkcs1-oaep
        - ol8vDBVQ2L5b1J++xdeJK6JgFLVmmElyq8nFdqScS8e1cyoKxc4phsz6ziz61SnxPVa3D
          jGOjJiH/MTeZYQzBE7vBE1d8cxKXUgRNNOfxwsAKO48CoI+l7vQCw3AcLojE2ZTMmo+XM
          SOGb6k5mSQbw1GXndEC6IBWjk20CopnjTBmx7BESvm42orPdnYCwbVkc9rFVNsMVFgEr2
          F6J79Dkfe2qLOtql7TWNUOafyB8S0TH+M/OR33cD5eog0QqQvKmg97gymP1mfs7S44vPJ
          MQL2x84KyRnieC7WvB0Ir4tpB95yc1OT11QOKJWCm3uzRpEy+OMEEL7iHqn6bqQy+nsYq
          5aNVjCpyJBh4p9aEJcnTw7NBQgiMy47RFiESMmRc9YxyCT2ABQcwhrzE1FqBBghfgotMi
          ZTmXfIDOsibIJ75zGygvYzobZ2Fnw6U7AmzrpWGneTlUEIPFvP+I7TUp4U5HKy6H/zQpn
          4qTr53l//Rw5N5O3E3ES15/yPpTQnDgGiL53Gru4PEk06QhOx+mNXDwG2thq4+jYKoEPu
          0q8K7JaaFtceR4TsskG95PnSn+mdfLgTByYqCZ0gVRXomtNpmUQfGAGj9VXOyEi1fS9U6
          5NriiMNYRQGeWw0dNT4Snf5naP2VI0LoXbJXb1nU6g1RsVfU6gY7sI+Hv76QWo=
      COSIGN_PASSWORD: !encrypted/pkcs1-oaep
        - RaosOxKcIN0fW73v91gb+2S2Tq0WLd2HSeoKCp1D5dJvwZUchHmep3lx/B1fy8GtoJ5qR
          +5Uv+MksJBJgEJ536ukDB11B0Ocrd4lbyhXKu5EP+OHTdIpbPHK8lGw42PoUVQox9VMXw
          YrCsNPjfzoEhja64xTs5jlMCnfIW2TluSwbAGmVcSxtxKym7h8oZktnv9ETe5AdBxEkAx
          f5bmYbiL22FBFnzriLoiDqevshGkUB5cjFD97VkYs01FUCyOLaj8KVR8sBj3NykPCn70E
          jYB1HdMziiEttDQ2UR8ASY9pbMeG9FoRnPulDc6M+gbui84wD5myaB7BLKyzd9jcBxjFg
          pro2qGVKaVEuNlNZeV0GFvl1id6TCLSk2v9Y7t/6D65Xbv4oTqf3f85ievCS+nto/XIZe
          /Fiad0dBThM1ye/3+FoYGpBjE0mReS0lhtasYSnU+UL80T8aSEtPGglSzs3PFauurfwoA
          b8IzyXuvnY66y15JEP+jY3XI550VeRabsyUmFI/8a62G08GpZaWqTp8hH8S5uSgBZ8FDa
          3gIib0M5hrkjA0VCq7aew/WNMFMPfZF5aXj+M0dfLuLstfAoNlqKlvLWtayoOHlgqQAAp
          ixIHdzLEN5zyM9HZGtnn7u1Od0c/vmeBRj8a/mZZNpqRricNJp/ujTszqgKTOw=
      COSIGN_PRIVATE_KEY: !encrypted/pkcs1-oaep
        - YXeQgCOcZM4oQe9z3LOLtVez3Zl4A8z3r6KkbfeGh8CNc+kFgKEffVJV1zu84wSApE0P5
          MIBuQup1eRluh18EKTIU/dFxNJMM3ypf57IinlIlk7kp7EpC32AiOzZb7R4xqw5YwvYEs
          up+tjdqQHCsZMXpdgnifXSfVZWSCnTUd8Qocm58IPdG79jwIBAWn1FjOXh1bXhPAGolGv
          Y3UnfontOZxbBBoIxgEUR4fYBSg9Wt1/pKLrB1//C1IGg+HLgv+tW7Bio329hncO2jGqi
          ArIqEBitHSFGtaapj/HbyEKVfkjxP2kXmdFEK2CshgN9wgeiyBImVXIzmXMhlDiJImswO
          SrilcBOV1m2wO7WWLTiFjF/4B5V/Wpvm3FEzbPThuypPLZ92C/adk1D7Ol3Mh5LO40Puc
          xDIFjISugn21e8LBN3C+6ikafIwE9kkJWDknxhK89Ge4KW0wkTgRa/w1lkf4J43QpSQYj
          K53Qh+FgZJDqcsflXdFFHddbdW+88YpBLFQh1VPvqil3iyL1mo2Vt2BWU9OaRuBjc5NSL
          Wnx67R4bi3UsvOfD8HpLm+PVg6XEAOR95LT+7YGeXw/IYCiLmKxRJhx1RKX3tWl5jTTfU
          cjqEitTF0Q/cohs43HBxkZyX+73yd5NoQzheTO9hy89cv7ThbqEzqGE/JKumHE=
        - Ua/qJmjoQS+gtSI+AT9LJmVhK0vaYQJFGaEMU2+Y5t8CnovYRs1YsNytPMlxHhey47hdG
          laKW8DAsuLzk/Zt8Dyr5MTmYeo+pCHx2OoRd4j8lik5DqmTx4LCy/IJoOn2zGh2Fj6BbP
          9TUNbnZup/7g/ksser1aYsQcoJtPxu2m9HPqANwWp1VKMuDoVn9Yj/iF5booMJQwvI2kG
          Uo0TJXCWc6FliRwvYq2a0n+LUIn6M3qA5VnofcbXoIuEXeKnK2uQojDov7aUprWVQGtCe
          Hl9TzKgcPv+CVPpt/eX3ZXUlUeKd7iZfzkAP7jJDPhjEbCkaYzjT5q19nNfhSnN6gJISv
          dvD/GWWYQTQY91iWg2+TLb/ITK0GxUGMjREMZzwBuENhot0H/GXyg3XrkrRTrXMcIA3al
          ducBYFnbwQs2gh76HZfmdtqpxBVOCMy0DW6JA0NA22lOZZQMFWJWsoyYyW60yrLCtBMSw
          5NR5RFroT53fCDr9YiF3ANc/rwzlimoaqiL7WWGpVoH3BqR2mVFQ86D/rnvAmbEk8jiDg
          A4nJWHb0CEAOE7ymoCrz8bSTmTeAsGBlYRsBtNr4PnrDnbSP4qUF9O1Lpj3L6UpE4IEeh
          0Q746qtG8EBWIqqiAyz9XQUObn6FOXBNe4V1urSLYs+G/rk5rb9u7GpSUcVOVc=

- job:
    name: ansible-collection-services-container-image-osism-ansible-push
    parent: abstract-container-image-osism-ansible-push
    secrets:
      - name: secret
        secret: SECRET_ANSIBLE_COLLECTION_SERVICES
        pass-to-parent: true

- job:
    name: abstract-ansible-collection-services-molecule
    parent: ansible-molecule
    abstract: true
    nodeset:
      nodes:
        - name: centos-9-stream
          label: centos-9-stream
        - name: debian-bookworm
          label: debian-bookworm
        - name: ubuntu-jammy
          label: ubuntu-jammy
        - name: ubuntu-noble
          label: ubuntu-noble
    vars:
      ansible_molecule_ansible_version: "11.10.0"
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/requirements\.txt$'
      - '^molecule\/delegated\/[^\/]*yml$'

- job:
    name: ansible-collection-services-molecule-adminer
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: adminer
    files:
      - '^roles\/adminer\/.*$'
      - '^molecule\/delegated\/tests\/adminer.*$'

- job:
    name: ansible-collection-services-molecule-auditd
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: auditd
    files:
      - '^roles\/auditd\/.*$'
      - '^molecule\/delegated\/tests\/auditd.*$'

- job:
    name: ansible-collection-services-molecule-cephclient
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: cephclient
    files:
      - '^roles\/cephclient\/.*$'
      - '^molecule\/delegated\/tests\/cephclient.*$'

- job:
    name: ansible-collection-services-molecule-cgit
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: cgit
    files:
      - '^roles\/cgit\/.*$'
      - '^molecule\/delegated\/tests\/cgit.*$'

- job:
    name: ansible-collection-services-molecule-chrony
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: chrony
    files:
      - '^roles\/chrony\/.*$'
      - '^molecule\/delegated\/tests\/chrony.*$'

- job:
    name: ansible-collection-services-molecule-clamav
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: clamav
    files:
      - '^roles\/clamav\/.*$'
      - '^molecule\/delegated\/tests\/clamav.*$'

- job:
    name: ansible-collection-services-molecule-containerd
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: containerd
    files:
      - '^roles\/containerd\/.*$'
      - '^molecule\/delegated\/tests\/containerd.*$'

- job:
    name: ansible-collection-services-molecule-dnsdist
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: dnsdist
    files:
      - '^roles\/dnsdist\/.*$'
      - '^molecule\/delegated\/tests\/dnsdist.*$'

- job:
    name: ansible-collection-services-molecule-dnsmasq
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: dnsmasq
    files:
      - '^roles\/dnsmasq\/.*$'
      - '^molecule\/delegated\/tests\/dnsmasq.*$'

- job:
    name: ansible-collection-services-molecule-docker
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: docker
    files:
      - '^roles\/docker\/.*$'
      - '^molecule\/delegated\/tests\/docker.*$'

- job:
    name: ansible-collection-services-molecule-fail2ban
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: fail2ban
    files:
      - '^roles\/fail2ban\/.*$'
      - '^molecule\/delegated\/tests\/fail2ban.*$'

- job:
    name: ansible-collection-services-molecule-falco
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: falco
    files:
      - '^roles\/falco\/.*$'
      - '^molecule\/delegated\/tests\/falco.*$'

- job:
    name: ansible-collection-services-molecule-frr
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: frr
    files:
      - '^roles\/frr\/.*$'
      - '^molecule\/delegated\/tests\/frr.*$'

- job:
    name: ansible-collection-services-molecule-gnmic
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: gnmic
    files:
      - '^roles\/gnmic\/.*$'
      - '^molecule\/delegated\/tests\/gnmic.*$'

- job:
    name: ansible-collection-services-molecule-hddtemp
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: hddtemp
    files:
      - '^roles\/hddtemp\/.*$'
      - '^molecule\/delegated\/tests\/hddtemp.*$'

- job:
    name: ansible-collection-services-molecule-homer
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: homer
    files:
      - '^roles\/homer\/.*$'
      - '^molecule\/delegated\/tests\/homer.*$'

- job:
    name: ansible-collection-services-molecule-httpd
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: httpd
    files:
      - '^roles\/httpd\/.*$'
      - '^molecule\/delegated\/tests\/httpd.*$'

- job:
    name: ansible-collection-services-molecule-journald
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: journald
    files:
      - '^roles\/journald\/.*$'
      - '^molecule\/delegated\/tests\/journald.*$'

- job:
    name: ansible-collection-services-molecule-lldpd
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: lldpd
    files:
      - '^roles\/lldpd\/.*$'
      - '^molecule\/delegated\/tests\/lldpd.*$'

- job:
    name: ansible-collection-services-molecule-manager
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: manager
    files:
      - '^roles\/manager\/.*$'
      - '^molecule\/delegated\/prepare\/manager.*$'
      - '^molecule\/delegated\/tests\/manager.*$'
      - '^molecule\/delegated\/vars\/manager.*$'

- job:
    name: ansible-collection-services-molecule-netbox
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: netbox
    files:
      - '^roles\/netbox\/.*$'
      - '^molecule\/delegated\/tests\/netbox.*$'

- job:
    name: ansible-collection-services-molecule-netbird
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: netbird
    files:
      - '^roles\/netbird\/.*$'
      - '^molecule\/delegated\/tests\/netbird.*$'

- job:
    name: ansible-collection-services-molecule-netdata
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: netdata
    files:
      - '^roles\/netdata\/.*$'
      - '^molecule\/delegated\/tests\/netdata.*$'

- job:
    name: ansible-collection-services-molecule-nexus
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: nexus
    files:
      - '^roles\/nexus\/.*$'
      - '^molecule\/delegated\/tests\/nexus.*$'

- job:
    name: ansible-collection-services-molecule-openstackclient
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: openstackclient
    files:
      - '^roles\/openstackclient\/.*$'
      - '^molecule\/delegated\/tests\/openstackclient.*$'

- job:
    name: ansible-collection-services-molecule-osquery
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: osquery
    files:
      - '^roles\/osquery\/.*$'
      - '^molecule\/delegated\/tests\/osquery.*$'

- job:
    name: ansible-collection-services-molecule-phpmyadmin
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: phpmyadmin
    files:
      - '^roles\/phpmyadmin\/.*$'
      - '^molecule\/delegated\/tests\/phpmyadmin.*$'

- job:
    name: ansible-collection-services-molecule-rng
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: rng
    files:
      - '^roles\/rng\/.*$'
      - '^molecule\/delegated\/tests\/rng.*$'

- job:
    name: ansible-collection-services-molecule-rsyslog
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: rsyslog
    files:
      - '^roles\/rsyslog\/.*$'
      - '^molecule\/delegated\/tests\/rsyslog.*$'

- job:
    name: ansible-collection-services-molecule-scaphandre
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: scaphandre
    files:
      - '^roles\/scaphandre\/.*$'
      - '^molecule\/delegated\/tests\/scaphandre.*$'

- job:
    name: ansible-collection-services-molecule-smartd
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: smartd
    files:
      - '^roles\/smartd\/.*$'
      - '^molecule\/delegated\/tests\/smartd.*$'

- job:
    name: ansible-collection-services-molecule-sshd
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: sshd
    files:
      - '^roles\/sshd\/.*$'
      - '^molecule\/delegated\/tests\/sshd.*$'

- job:
    name: ansible-collection-services-molecule-squid
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: squid
    files:
      - '^roles\/squid\/.*$'
      - '^molecule\/delegated\/tests\/squid.*$'

- job:
    name: ansible-collection-services-molecule-thanos_sidecar
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: thanos_sidecar
    files:
      - '^roles\/thanos_sidecar\/.*$'
      - '^molecule\/delegated\/tests\/thanos_sidecar.*$'

- job:
    name: ansible-collection-services-molecule-teleport
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: teleport
    files:
      - '^roles\/teleport\/.*$'
      - '^molecule\/delegated\/tests\/teleport.*$'

- job:
    name: ansible-collection-services-molecule-traefik
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: traefik
    files:
      - '^roles\/traefik\/.*$'
      - '^molecule\/delegated\/tests\/traefik.*$'

- job:
    name: ansible-collection-services-molecule-tuned
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: tuned
    files:
      - '^roles\/tuned\/.*$'
      - '^molecule\/delegated\/tests\/tuned.*$'

- job:
    name: ansible-collection-services-molecule-wazuh-agent
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: wazuh_agent
    files:
      - '^roles\/wazuh-agent\/.*$'
      - '^molecule\/delegated\/tests\/wazuh-agent.*$'

- job:
    name: ansible-collection-services-molecule-wireguard
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: wireguard
    files:
      - '^roles\/wireguard\/.*$'
      - '^molecule\/delegated\/tests\/wireguard.*$'

- job:
    name: ansible-collection-services-molecule-zabbix_agent
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: zabbix_agent
    files:
      - '^roles\/zabbix_agent\/.*$'
      - '^molecule\/delegated\/prepare\/zabbix_agent.*$'
      - '^molecule\/delegated\/tests\/zabbix_agent.*$'
      - '^molecule\/delegated\/vars\/zabbix_agent.*$'

- job:
    name: ansible-collection-services-molecule-zuul
    parent: abstract-ansible-collection-services-molecule
    vars:
      ansible_role: zuul
    files:
      - '^roles\/zuul\/.*$'
      - '^molecule\/delegated\/tests\/zuul.*$'

- project:
    merge-mode: squash-merge
    default-branch: main
    check:
      jobs:
        - ansible-collection-services-molecule-adminer
        - ansible-collection-services-molecule-auditd
        - ansible-collection-services-molecule-cephclient
        - ansible-collection-services-molecule-cgit
        - ansible-collection-services-molecule-chrony
        - ansible-collection-services-molecule-clamav
        - ansible-collection-services-molecule-containerd
        - ansible-collection-services-molecule-dnsdist
        - ansible-collection-services-molecule-dnsmasq
        - ansible-collection-services-molecule-docker
        - ansible-collection-services-molecule-fail2ban
        - ansible-collection-services-molecule-falco
        - ansible-collection-services-molecule-frr
        - ansible-collection-services-molecule-gnmic
        - ansible-collection-services-molecule-hddtemp
        - ansible-collection-services-molecule-homer
        - ansible-collection-services-molecule-httpd
        - ansible-collection-services-molecule-journald
        - ansible-collection-services-molecule-lldpd
        - ansible-collection-services-molecule-manager
        - ansible-collection-services-molecule-netbox
        - ansible-collection-services-molecule-netbird
        - ansible-collection-services-molecule-netdata
        - ansible-collection-services-molecule-nexus
        - ansible-collection-services-molecule-openstackclient
        - ansible-collection-services-molecule-osquery
        - ansible-collection-services-molecule-phpmyadmin
        - ansible-collection-services-molecule-rng
        - ansible-collection-services-molecule-rsyslog
        - ansible-collection-services-molecule-scaphandre
        - ansible-collection-services-molecule-smartd
        - ansible-collection-services-molecule-sshd
        - ansible-collection-services-molecule-squid
        - ansible-collection-services-molecule-thanos_sidecar
        - ansible-collection-services-molecule-teleport
        - ansible-collection-services-molecule-traefik
        - ansible-collection-services-molecule-tuned
        - ansible-collection-services-molecule-wazuh-agent
        - ansible-collection-services-molecule-wireguard
        - ansible-collection-services-molecule-zabbix_agent
        - ansible-collection-ensure-readme
        - ansible-lint
        - flake8
        - python-black
        - yamllint
    periodic-daily:
      jobs:
        - ansible-lint
        - flake8
        - python-black
        - yamllint
    post:
      jobs:
        - ansible-collection-services-container-image-osism-ansible-push:
            branches: main
