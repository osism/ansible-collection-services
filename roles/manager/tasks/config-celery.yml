---
# NOTE: required by the watchdog service
- name: Set fs.inotify.max_user_watches
  become: true
  ansible.posix.sysctl:
    name: fs.inotify.max_user_watches
    value: '32768'
    sysctl_set: true
    state: present
    reload: true

- name: Copy celery configuration files
  ansible.builtin.template:
    src: "celery/{{ item }}.j2"
    dest: "{{ manager_configuration_directory }}/{{ item }}"
    mode: 0644
    owner: "{{ operator_user }}"
    group: "{{ operator_group }}"
  loop:
    - listener.conf
